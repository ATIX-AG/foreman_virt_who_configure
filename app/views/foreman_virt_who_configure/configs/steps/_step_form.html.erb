<% javascript 'foreman_virt_who_configure/config_edit' %>
<% stylesheet 'foreman_virt_who_configure/config' %>

<%= form_for @config, :as => 'foreman_virt_who_configure_config', :url => (@config.new_record? ? foreman_virt_who_configure_configs_path : foreman_virt_who_configure_config_path(:id => @config)) do |f| %>

  <%= base_errors_for @config %>
  <%= f.hidden_field(:current_step, :value => @config.next_step) unless @config.current_step.blank? %>

  <%= wizard_header @config.step_index, *ForemanVirtWhoConfigure::Config::WIZARD_STEPS.values %>
  <% @config.steps.each do | step | %>
    <%= render :partial => "foreman_virt_who_configure/configs/steps/#{step.downcase.tr(' ', '_')}_form", :locals => {:f => f, :step => step} %>
  <% end %>
  <%= submit_or_cancel_config(f, (_('Next') unless @config.last_step?) ) %>
<% end %>
